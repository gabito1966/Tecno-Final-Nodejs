<div class="max-w-2xl mx-auto mt-10 bg-white shadow rounded-xl p-6">
    <h1 class="text-2xl font-bold mb-6">
        <%= user && user.id ? "Editar usuario" : "Crear usuario" %>
    </h1>

    <% if (error) { %>
        <div class="bg-red-100 text-red-700 p-2 mb-4 rounded">
            <%= error %>
        </div>
        <% } %>

            <form action="<%= user && user.id ? `/users/edit/${user.id}` : '/users/create' %>" method="POST"
                class="space-y-4">
                <div>
                    <label class="block font-semibold mb-1">Nombre</label>
                    <input type="text" name="name" value="<%= user ? user.name : '' %>"
                        class="w-full border rounded-lg px-3 py-2" required>
                </div>

                <div>
                    <label class="block font-semibold mb-1">Email</label>
                    <input type="email" name="email" value="<%= user ? user.email : '' %>"
                        class="w-full border rounded-lg px-3 py-2" required>
                </div>

                <% if (!user || !user.id) { %>
                    <div>
                        <label class="block font-semibold mb-1">Contrase√±a</label>
                        <input type="password" name="password" class="w-full border rounded-lg px-3 py-2" required>
                    </div>
                    <% } %>

                        <div>
                            <label class="block font-semibold mb-1">Rol</label>
                            <select name="role" class="w-full border rounded-lg px-3 py-2" required>
                                <option value="admin" <%=user && user.role==='admin' ? 'selected' : '' %>>admin</option>
                                <option value="user" <%=user && user.role==='user' ? 'selected' : '' %>>user</option>
                            </select>
                        </div>

                        <div class="flex gap-4 mt-6">
                            <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
                                <%= user && user.id ? "Guardar cambios" : "Crear usuario" %>
                            </button>

                            <% if (user && user.id) { %>
                                <a href="/users/view/<%= user.id %>"
                                    class="px-4 py-2 bg-red-500 hover:bg-red-700 text-white rounded-lg">
                                    Cancelar
                                </a>
                                <% } else { %>
                                    <a href="/users/view"
                                        class="px-4 py-2 bg-red-500 hover:bg-red-700 text-white rounded-lg">
                                        Cancelar
                                    </a>
                                    <% } %>
                        </div>
            </form>
</div>